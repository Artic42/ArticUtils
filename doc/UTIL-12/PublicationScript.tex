\def\MYTITLE{UTIL-12:Doc publication script definition}
\def\MYNAME{Artic42}

\input{/home/artic/Templates/tex/articleTemplate}
\input{/home/artic/Templates/tex/orangeBackground}
\usepackage{dirtree}

\begin{document}
    \title{\MYTITLE}
    \author{\MYNAME}
    \date{\today}
    \maketitle
    \thispagestyle{firstPage}

    \begin{abstract}
        The objective of this script is to automatically upload a file to OneDrive. This will allow to check the documents from any device. And will allow to easily link the docs to JIRA tasks without take space in the server.

        Call the script and add the path to the pdf and to the tex file as arguments.
    \end{abstract}

    \section{Folder structure}
    The documents will automatically be added to a folder structure to make things easier to find.
    \vspace{12pt}
    \renewcommand{\baselinestretch}{1.3}
    \dirtree{%
    .1 OneDrivePath.
    .2 ProjectName.
    .3 EpicName1.
    .4 TaskNumber-DocTitle.
    .3 EpicName2.
    .2 ProjectName2.
    }
    \renewcommand{\baselinestretch}{1}
    \section{Library}
    This script uses the oneDriveFileManagement library present on project ArticUtils.
    \section{Algorithm}
    The script will ask for a path to the document. In this document the following lines will exist in order to give the necessary data for the publishing.
    \begin{verbatim}
        \def\FILENAME{$The filename$}
        \def\PROJECT{$ProjectName$}
        \def\EPIC{$Epic name$}
    \end{verbatim}
    \begin{algorithm}[h!]
        \caption{Publish document main function}
    \begin{algorithmic}
        \Function{publishDocument}{$path, pathTex$}
        \State getFileName($pathTex$)
        \State getProjectName($pathTex$)
        \State getEpicName($pathTex$)
        \State Authenticate in OneDrive
        \If{$Project folder exists \neq TRUE$}
            \State Create project folder
        \EndIf
        \If{$Epic folder exists \neq TRUE$}
            \State Create epic folder
        \EndIf
        \State Copy file into folder
        \State Print link to the file
        \State Close connection
        \EndFunction
    \end{algorithmic}
    \end{algorithm}

    \break

    \subsection{getFileName}
        \begin{algorithm}[h!]
            \caption{Get the file name from the tex file}
        \begin{algorithmic}
            \Function{publishDocument}{$path, pathTex$}
            \State Open tex file
            \State Find the line containing $\textbackslash DEF \textbackslash FILENAME$
            \State Eliminate everything before \{
            \State Eliminate everything after \}
            \State \Return Line
            \EndFunction
        \end{algorithmic}
        \end{algorithm}

    \subsection{getProjectName and getEpicName}
        Same as getFileName but instead of look for line containing
        \begin{verbatim}
            \DEF\PROJECT
            \DEF\EPIC
        \end{verbatim}

    \section{Test}
    Publish this file an check if it works
\end{document}